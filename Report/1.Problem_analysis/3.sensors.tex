\section{Application of Sensors and Actuators}\label{sec:actuator_sensor} 
%In this section, we briefly describe the sensors and actuators available in the Kaggle competition for measuring indoor positions. Furthermore, we present the advantages and disadvantages of using these sensors and actuator.

In this section, we briefly describe the commonly used sensors and actuators that can be used in \gls{ips}, along with examples of systems making use of them, their advantages and disadvantages. 

A wide range of technologies are available for \gls{ips}s, that either make use of the sensors in the mobile device or external devices. The phone itself provides \gls{imu} sensor, microphone, cameras and more, all of which are useful for \gls{ips}s. External devices include Wi-Fi router, Bluetooth beacons, \gls{rfid} tags, ultrasound transmitters and more.

%\subsection{Sensors and Actuators Overview}
%subsection{External Devices}

%When using WiFi signals, the users position is calculated based on the strength of the Wi-Fi signals.

%Also, one of the most widely used technologies is \gls{ble} beacons. They, like Wi-Fi routers, send a signal in a radius of 10-30 meters, and then use the Bluetooth signals to position the user.

%A third alternative is using \gls{uwb} transceiver which transmits signals from antennas.

\subsection{Wi-Fi} \label{sec:WiFi}
%Using Wi-Fi routers to measure distance, one can use different techniques, such as \gls{toa}, \gls{tdoa} or \gls{rss}. 
A popular technique for using Wi-Fi is \gls{rss}. An \gls{rssi} is an integer in the range of 0 to 255 that represents the strength of a signal in \gls{dbm}.\cite{RSSIWiFiDistance, RSSIMeasurement}
\gls{rssi} from Wi-Fi routers enable computing the position of a receiver device using triangulation or trilateration, as long as at least three Wi-Fi routers are within range, which will be described in \textbf{\autoref{sec:triangulation}}.
Also, \gls{rssi} from Wi-Fi beacons can be used in fingerprinting, a unique identification of a location, which will be described in \textbf{\autoref{sec:scene_analysis}}\cite{HabilitationThesis}.

One of the advantages of using Wi-Fi is that Wi-Fi is already integrated in many buildings, so it will be easy to implement this solution, and most mobile devices are equipped with Wi-Fi sensors.
A disadvantage of Wi-Fi routers is that they lack in precision and function ideally when there is no obstruction to its signal - for instance walls, furniture, or people. Even when there is no obstruction, Wi-Fi routers will still only have an accuracy of 10-20 meters.\cite{oriient}

Using Wi-Fi for indoor positioning is not as commonly used as Bluetooth due to its low accuracy. However, Skyhook have implemented a Wi-Fi based solution for use in urban areas\cite{skyhook}. The solution is mainly based on fingerprinting, and reaches an accuracy of 10-20 meters outdoors. However, in indoor environments, the system has an accuracy of 30-70 meters. Another solution is provided by Ekahau that is based on a combination of fingerprinting and track history. Their solution reaches an accuracy of around 7 meters in indoor environments.\cite{HabilitationThesis}

%We will probably experiment with Wi-Fi, since it is already widely integrated in buildings and is therefore a cost-effective method. 
%Wi-Fi data is also provided by the dataset at Kaggle, mentioned in \textbf{\autoref{sec:kaggleComp}}.

\subsection{Bluetooth Beacons}
In order to determine the location of a device using Bluetooth beacons, the same approach is used as described in \textbf{\autoref{sec:WiFi}}, with use of Bluetooth signals instead. The Bluetooth signals are transmitted through beacons, that can be used in triangulation or trilateration to position a user, which will be described in \textbf{\autoref{sec:triangulation}}.

An advantage of using beacons is that the beacon technology works on both iOS and Android devices.
Also, Bluetooth beacons can have a range up to 100 meters\cite{8419192}.
Bluetooth beacons can measure a distance with a precision within 3 meters at best.\cite{BluetoothBeacons} Also, the measurement values used in \gls{rssi} deviate, and therefore, a fitting technique must be used in order to improve precision\cite{RSSIWiFiDistance}.

Bluetooth beacons are commonly used in localisation systems. For example, Bargh and de Grote implemented a fingerprint-based localisation system, using the response rate of Bluetooth requests.\cite{HabilitationThesis} Also, the company ZONITH, which is a software company designed to protect personnel and security staff in workplaces\cite{zonith}, implemented an indoor localisation system using Bluetooth beacons placed in rooms and Bluetooth in phones. The Bluetooth beacons in rooms are used to locate which room the phones are in.\cite{HabilitationThesis}
%Nearmotion is also a company that specialises in indoor navigation and has recently developed an Augmented Reality technology that can navigate people in indoor environments. However, their main technology for navigation is the usage of Bluetooth beacons.\cite{nearmotion}



\subsection{Infrared}
Infrared can be used in various ways. One of the ways is by infrared beacons, which are used much like Wi-Fi routers and Bluetooth beacons. That is, the approach with infrared beacons is based on placing infrared beacons at fixed known locations and using the \gls{aoa} to triangulate the position of a device, as will be described in \textbf{\autoref{sec:triangulation}}.\cite{HabilitationThesis}

Another approach is by imaging natural infrared radiation. Thermal infrared radiation can be used to determine the temperature of objects, and can be used to locate an object by placing sensors in the corners of the space to monitor and measure the angle relative to the radiation source using triangulation.
The advantage of this approach is that it can reach an accuracy of 20-30 centimeters at a 10 meters range.
The disadvantage of this approach is that the measurement is affected by radiation from the sun.\cite{HabilitationThesis}

A third approach is by imaging artificial infrared light. This approach is for example used in Microsoft Kinect, where infrared structured light is continuously projected to capture a 3D scene with an infrared camera. A 3D structure can be captured by a distortion of infrared light dots.
The advantage of this approach is that it has been reported to have an accuracy of one centimeter, but only at a range of up to 3.5 meters.\cite{HabilitationThesis}

The disadvantage of this approach using infrared is that infrared signals are unable to penetrate obstacles and usually have a range of around two meters\cite{HabilitationThesis}.

One widely known infrared positioning system is the Active Badge System, which is based on infrared beacons. The purpose of the system is to locate the room people are in. The people must wear a badge that emits infrared pulses along an ID, which are then picked up by infrared receivers deployed at a fixed location.\cite{HabilitationThesis}



\subsection{Ultrasound-Based}
Ultrasound positioning can be done by using ultrasound transmitters that can broadcast sound waves which a standard microphone in a smartphone can gather and use for determining the position\cite{IPSMapsPeople}. In contrast to Bluetooth and Wi-Fi, the ultrasound signal can be obstructed by walls, doors, etc. This can be an advantage if you do not want ambiguity between rooms. Since ultrasound signals are obstructed by walls, the signal can not escape the room, and you will therefore have a more approximate localisation in terms of rooms.\cite{leverage-ultrasound} Another great advantage of using ultrasound is the precision. Beacons using ultrasound can get an accuracy down to 30 centimeters.\cite{mapspeopleultrasound}

One of the leading companies in ultrasound positioning is Sonitor. They have indoor localisation solutions for areas like the hospitality industry and the medical industry, where it can be important to know the exact room a person is located in.\cite{sonitor}

\subsection{Ultra Wideband}
Ultra Wideband (UWB) works by transmitting signals using an antenna, much like Bluetooth beacons and Wi-Fi routers. Therefore, like Bluetooth beacons and Wi-Fi routers, the location of a device can be computed making use of triangulation or trilateration, mentioned in \textbf{\autoref{sec:triangulation}} and \textbf{\autoref{sec:trilateration}}. Furthermore, systems making use of UWB benefits from the high accuracy that is achievable, since it is possible to achieve an accuracy of around 30 centimeters. A disadvantage of UWB is that they are susceptible to interference.\cite{oriient} Another disadvantage is that additional hardware is required to be installed on the device to be positioned in order to receive the signals\cite{LundIMU}.
\gls{ips}s in industrial environments often use UWB to locate devices. This is because precision is usually of high priority.\cite{Infsoft}

%Using UWB as the solution for this project will require the additional cost of installing the required hardware. Therefore, we have decided not to use UWB as part of the solution for this project.

\subsection{Light-Based} \label{light-based}
Through LED lighting, we can position objects inside buildings. The LED light component communicates with smartphones through Bluetooth Low Energy, visible light communication, or video analysis.\cite{IPSMapsPeople}

One of the leading companies working with light-based indoor positioning is Phillips. They make use of their Philips \gls{vlc}, and Philips LED luminaries. Each fixture will send out a unique identifier to the users' smartphone, where the camera in the smartphone detects the code in the light, and identifies its location so the system can pinpoint the user.\cite{philips} One of the advantages of this method is the accuracy, where Philips promise an accuracy of around 30 centimeters.\cite{IPSMapsPeople} This, on the other hand, is an expensive solution, because you would need to install the LED lights. \gls{vlc} also suffers from a need for constant communication coverage, meaning that the device needs to be in an area where it is affected by the light.\cite{9249516}

%Light-based indoor localisation systems is expensive, since it requires installing the additional hardware. Therefore, this solution will not be used for this project.

\subsection{Radio Frequence IDentification}
An \gls{rfid}-based indoor localization system works by having \gls{rfid} readers listen for radio waves transmitted by nearby \gls{rfid} tags. Using \gls{rfid} readers in fixed locations, an indoor localization system can be built using the readers the same way as for Wi-Fi routers and Bluetooth beacons as either proximity, fingerprinting, trilateration, or triangulation.\cite{HabilitationThesis}

There are generally two types of \gls{rfid} systems: passive and active. Active \gls{rfid} readers are equipped with batteries, making them heavier and more costly. On the other hand, active \gls{rfid} have a range of up to 30 meters. Passive \gls{rfid} readers do not require batteries, but rely on inductive coupling, where energy is received from radio waves transmitted by a nearby \gls{rfid} tag. Passive \gls{rfid} readers are small in size, inexpensive to install, and requires minimal maintenance due to the fact they have no batteries. On the other hand, passive \gls{rfid} readers have a limited range of two meters, making them dependent on dense deployment.\cite{HabilitationThesis}.

\gls{rfid} tags are used for indoor positioning in the navigational system \textit{ways4all}, where several arrays of \gls{rfid} tags are positioned under the carpet to help guiding blind people around an indoor environment\cite{HabilitationThesis}.

%Passive \gls{rfid} readers have too short range to be used in this project. Active \gls{rfid} readers seem feasible, but require batteries, which induces more maintenance. Furthermore, additional hardware for each object of interest is necessary, which is not ideal. Therefore, this sensor type is not suitable for this project.

\subsection{Inertial Measurement Unit} \label{imu-section}

An inertial measurement unit is an electronic device that tries to obtain information about a moving object, for instance, speed, angular rate, and sometimes the orientation of the body. This information is obtained through accelerometers, gyroscopes, and magnetometers.

A gyroscope is an angular sensor that measures the Coriolis force, which is a force used to describe the motion of an object\cite{Gyroscope}. Using gyroscopes in phones, one can therefore measure the movement of the phone.

An accelerometer is a sensor that measures the difference between the linear acceleration of a device and the local gravitational force\cite{Accelerometer}. It can be used to measure the tilt of a phone as well as acceleration resulting from motion\cite{Accelerometer2}.

A magnetometer is a magnetic sensor used in sensing a magnetic field. This can be used in sensing linear and rotary positions. Compasses in phones is a direct example of an application that uses a magnetometer in sensing the magnetic field of Earth.\cite{Magnetometer}

A disadvantage of magnetometers is that they are sensitive to the environment. That is, if there is a lot of metal in the surrounding environment, it will affect the magnetometer sensor reading.\cite{MagnetometerAdvDisadv} % Might not be a trustworthy source, but no other could be found.
A disadvantage of gyroscopes is that its sensor readings are effected by the movement of the object carrying the gyroscope. If an object is moving in one direction, the gravitational force pulls from the direction the object is moving from, hence, the gyroscope readings tell that the device is tilted toward its moving direction.\cite{Gyroscope}

One of the reasons is the error accumulation in measuring acceleration, especially over long durations of time. One use of \gls{imu} for positioning is used in a quadcopter project, where the \gls{imu} is used to help the quadcopter know its position. This is because quadcopters are aerodynamically unstable, which leads to this error positioning.\cite{IMUQuadcopter}

%The sensors making up the \gls{imu} are usually integrated within most mobile devices and is therefore feasible as a solution for \gls{ips}'. We will in this project experiment with \gls{imu} for indoor positioning.

\subsection{Geomagnetic}
In geomagnetic positioning, we use magnetic sensors, like the compass in smartphones, to determine a user's position using Earth's magnetic fields, that interact with the building the user is located in\cite{IPSMapsPeople}. As long as the construction of the building remains the same, the magnetic flux will also stay the same in that specific area. The magnetic flux is a measurement of the total magnetic field which passes through a given area.\cite{magneticflux}

The advantage of this method is that it is not necessary to have any external hardware that needs to be set up, because the mobile device itself usually has an integrated magnetometer. There is also no interference, because it does not use radio signals. However, the magnetic anomalies must be measured and mapped before it can give accurate positional data.\cite{magneticperformance}

The use of magnetic fields makes this option popular for businesses who want to map the interior of their buildings\cite{magneticperformance}. For example, the company IndoorAtlas provides an indoor localization system using Earth's geomagnetic field. The system works by using magnetic sensors to detect metals in a building. This can be used to build a map of the building and tracking.\cite{IndoorAtlas}

%Magnetic sensors are usually integrated within mobile devices, since they are part of the \gls{imu}. We will experiment with magnetic sensors, since this seems feasible.

\subsection{Hybrid} \label{sec:hybrid}
Some of the above mentioned techniques can be used together to improve accuracy. In \cite{aauhybrid}, a method is proposed where a hybrid between Wi-Fi and Bluetooth is developed. The Wi-Fi is used as the main infrastructure for fingerprint-based positioning, and Bluetooth hotspots are used for partitioning the indoor space, whereafter a Wi-Fi position is estimated. It works by having multiple Bluetooth hotspots around the area, and when a user leaves a Bluetooth hotspot, a Wi-Fi estimate will be obtained by searching the corresponding part of the radio map, where the specific part is given by the Bluetooth hotspot. By using this method, they could improve the accuracy from 3.15 meters (pure Wi-Fi), to 1.75 meters (hybrid).

In \cite{9249516}, a hybrid between visible light communications (\gls{vlc}) together with \gls{imu} is proposed. \gls{vlc} systems can give highly accurate positioning, but they require constant communication coverage, as mentioned in \textbf{\ref{light-based}}. \gls{imu}, on the other hand, suffers from having cumulative errors, as also mentioned in \textbf{\ref{imu-section}}. The method tries to beat these disadvantages by combining the two techniques. The system consists of three devices: \gls{vlc} device, \gls{imu} foot-mounted device, and a radio frequency device. The \gls{vlc} device provides the data position to the \gls{imu} device, and the \gls{imu} and light measurements are afterwards sent to the central monitoring station through radio frequency. By creating this hybrid, the accuracy improved from 1.5 meters (pure \gls{imu}) to 0.7 meters (hybrid).

Since hybrid solutions in many cases result in the highest accuracy, using a hybrid solution in this project could be a possibility.

\subsection{Popular Implementations}
When looking at the existing systems, it is very clear that most companies use beacons in order to navigate indoors\cite{IPSMapsPeople}. However, still many of the companies, such as IndoorAtlas and MapsPeople, utilize a lot of different technologies, but are dependent on the customers' case, in terms of money, time and usage\cite{IndoorAtlas}.

When considering the research area of \gls{ips}, it seems as \gls{vlc} is currently one of the most popular areas of research.\cite{8911806, 8935876, 9170801, 9069785}

%We will probably experiment with Wi-Fi, since it is already widely integrated in buildings and is therefore a cost-effective method.

When considering the different sensors and actuators, we will be focusing on technology, where the infrastructure is widely implemented already or consists of a cheap infrastructure. We focus on this as this would ensure that the solution to our problem could be more widely applicable. For Ultra Wideband and Light-based, the infrastructure needed to use these technologies are quite expensive to implement, and the extend, which is required, to get accurate position estimation is not already widely implemented.

%Since this project aims to be estimate indoor positions  in shopping malls, that often have large open areas, it might be impractical to use ultrasound.
Ultrasound-based methods is sensitive against obstructions which is not ideal for most environments and is therefore impractical.
Using infrared for indoor positioning in this project is infeasible, since it would require additional hardware setup and is therefore not a cost-effective and widely implementable solution. Furthermore, infrared for indoor positioning is vulnerable to obstacles, which are highly present in most environments.

The disadvantage of \gls{rfid} is that the amount of tags to be carried by users scales with the amount of users, which needs to be tracked. Furthermore, active \gls{rfid} tags require batteries which makes it expensive to maintain and passive \gls{rfid} tags require dense deployment to track users, which becomes expensive as well.

Infrastructure with Wi-Fi routers and Bluetooth beacons are widely implemented in buildings, which means that it would be relatively easy to implement a method which uses this type of data without a large overhead in price. \gls{imu} and geomagnetic sensors are also largely available in today's smartphones, which means that methods using this type of data is also widely applicable.

%Since this project aims to be deployed in shopping malls, that often have large open areas, it might be impractical to use ultrasound.


%We will be looking further into using Bluetooth beacons, due to its availability for both iOS and Android platforms. Another advantage is the range of the Bluetooth beacons compared to, for example, infrared and \gls{rfid}, which is an advantage when covering large areas, such as shopping malls.

%radio frequnece identification